package com.mtest.module;

import android.util.Log;

import com.mtest.config.MtestConfig;

public class DDRModule {
    private static final String TAG = "SDcardModule";

    public DDRModule() {}

    public int checkDDR () {// edwin 20200527 implement DDR Test
        Log.d(TAG, "checkDDR: ");
        boolean pass = false;
        String data = "0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF"
                +"0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF0123456789ABCDEF";
        StringBuilder sb = new StringBuilder();
        for (int i = 0; i < 10240; i++) {
            sb.append(data);
        }
        //Log.d(TAG, "checkDDR: " + sb.toString().getBytes().length/1024/1024+" MByte");

        pass = true;
        int a = 0;
        int b = 1024;
        for (int i = 0; i < 10240; i++) {
            String read = sb.substring(a, b);
            if (!read.equals(data))
                pass = false;
            a += 1024;
            b += 1024;
        }
        //Log.d(TAG, "checkDDR: pass = "+pass);

        if (pass)
            return MtestConfig.TEST_RESULT_PASS;
        else
            return MtestConfig.TEST_RESULT_FAIL;
    }
}
